<div class="container mt-5">
  <div class="d-flex flex-column">
	  <div class="d-flex flex-column w-100 border border-2 text-center this-round">
	  	<h2 class="mt-5 mb-2">Party Secretariats</h2>
		<img data-src="https://res.cloudinary.com/inidaname/image/upload/w_auto,c_scale/v1514741806/IMG_20171219_170606_yykfmq.jpg" class="d-block w-75 mr-auto ml-auto mt-3 mb-3 border border-2 border-dark cld-responsive" alt="Office Picture">
		{{#if contact.address}}
		<address id="thisAddress" class="lead">
			<hr class="w-75 mr-auto ml-auto mt-4">

		  {{contact.address}}
		</address>
		  <p id="thisContact">
			 <i class="fa fa-phone" style="color: green; font-size: 25px;"></i>&nbsp;&nbsp; <strong style="font-size: 19px;">{{contact.officeNo}}</strong> &nbsp; &nbsp;
			 <i class="fa fa-envelope" style="color: red; font-size: 25px;"></i>&nbsp;&nbsp; <strong style="font-size: 19px;">{{contact.officeEmail}}</strong>
		  </p>
		  {{else}}
		  <small>Address has not been provided yet please contact the National Secretariat for more info</small>
		  <address id="thisAddress" class="lead">
  			<hr class="w-75 mr-auto ml-auto mt-4">
  		  Plot 3379A, No. 20 Mungo Park Close, <br>Off Jesse Jackson/Gimbya Street <br>Asokoro/Area 11. <br>Abuja. Nigeria
  		</address>
  		  <p id="thisContact">
  			 <i class="fa fa-phone" style="color: green; font-size: 25px;"></i>&nbsp;&nbsp; <strong style="font-size: 19px;">+234 906 000 0536</strong> &nbsp; &nbsp;
  			 <i class="fa fa-whatsapp" style="color: green; font-size: 25px;"></i>&nbsp;&nbsp; <strong style="font-size: 19px;">+234 906 182 5005</strong><br><br>
  			 <i class="fa fa-envelope" style="color: red; font-size: 25px;"></i>&nbsp;&nbsp; <strong style="font-size: 19px;">contact@adp.ng</strong>
  		  </p>
		  {{/if}}
		  <ul class="d-flex flex-row justify-content-between list-inline w-75 mt-2 mb-2 mr-auto ml-auto">
			  <li class="list-inline-item">
				  <a href="https://twitter.com/adpng" target="_blank">
							 <span style="color: #0084b4;"><i class="fa fa-twitter"></i></span>
						</a>
			  </li>
			  <li class="list-inline-item">
				  <a href="https://plus.google.com/b/109738579653343939111/109738579653343939111" target="_blank">
							 <span style="color: #d34836;"><i class="fa fa-google-plus"></i></span>
						</a>
			  </li>
			  <li class="list-inline-item">
				  <a href="https://www.facebook.com/adpnigeria" target="_blank">
							 <span style="color: #3b5998;"><i class="fa fa-facebook"></i></span>
						</a>
			  </li>
			  <li class="list-inline-item">
				  <a href="https://www.youtube.com/channel/UCZeeD86RO6j_ZsUzjwNezgw" target="_blank">
							 <span style="color: #cd201f;"><i class="fa fa-youtube"></i></span>
						</a>
			  </li>
			  <li class="list-inline-item">
				  <a href="https://www.instagram.com/adpnigeria" target="_blank">
							 <span style="color: #8a3ab9"><i class="fa fa-instagram"></i></span>
						</a>
			  </li>
			  <li class="list-inline-item">
				  <a href="https://github.com/adpnigeria" target="_blank">
							 <span style="color:#333;"><i class="fa fa-github"></i></span>
						</a>
			  </li>
			  <li class="list-inline-item">
				  <a href="https://www.linkedin.com/company/18295061/" target="_blank">
							 <span style="color:#0077b5;"><i class="fa fa-linkedin"></i></span>
						</a>
			  </li>
			  <li class="list-inline-item">
				  <a href="https://medium.com/action-democratic-party" target="_blank">
							 <span style="color:#66cdaa;"><i class="fa fa-medium"></i></span>
						</a>
			  </li>
		  </ul>
	  </div>
	  <div class="d-flex flex-column w-100 mt-5">
		  <h2 class="text-center mt-4 mb-1">Secretariat Addresses</h2>
		  <small class="text-center mb-4">Click on the links below for addresses and information</small>
		  {{#if state}}
		  <div class="row">
			  {{#each location}}
			  <div class="col-sm-6 mb-4">
			    <div class="card">
			      <div class="card-body">
			        <h5 class="card-title">{{this._id}} State Address</h5>
			        <p class="card-text">Click Below to see addresses of ADP Branches</p>
			        <a href="{{this._id}}/" class="btn btn-primary">Click Here</a>
			      </div>
			    </div>
			  </div>
			  {{/each}}
		  </div>
			  {{else}}
		  <div class="row" id="listWards">
			  {{#each location}}
			  <div class="col-sm-6 mb-4">
				  <div class="card">
					  <div class="card-body">
						  <h5 class="card-title">{{this._id}} Address</h5>
						  <p class="card-text">Click Below to see addresses of ADP Branches</p>
						  <button onclick='getThere("{{this._id}}")' class="btn btn-primary">Click Here</button>

					  </div>
				  </div>
			  </div>
			  {{/each}}
	  </div>
		  {{/if}}
	  </div>
  </div>
</div>
<!-- <script type="text/javascript">
document.onreadystatechange = function() {
	if (document.readyState === "complete") {
		console.log(location.hash);
	}
}

var toReload = () => {
	location.reload()
}

var displayThem = (thepeople, theward, thelga, thestate) => {
	$('#thePollName').html(thepeople)
	$('#populate').css('display', 'none');
	var viewPeople = ThisMember.come
	var len = 0
	$('#showTable').removeClass('is-hidden')
	viewPeople.forEach((item) => {
		if (thestate === item.stName) {
			if (item.lgaName === thelga) {
				if (item.wardName === theward) {
					if (item.pollingUnit === thepeople) {
						len++
						$('#theViewPeople').append(`<tr><td>`+len+`</td><td>`+item.full_name+`</td><td>`+item.gender+`</td></tr>`)
					}
				}
			}
		}
	})
}


var ThisMember = {
  set current(name) {
    this.come = name;
  },
  come: null
}

	var emptyLGAPPL = []


	var getThePlace = function (getThePlace) {
		var child = document.getElementById('populate').innerHTML = ' '
		// var breadcrumb = document.getElementById('breadcrumb')

		$('#breadcrumb').append('<li><a href="#" class="is-active" aria-current="page" onclick="toReload()">'+getThePlace+'</a></li>')

		emptyLGAPPL = []
		$.getJSON('/register/getLGA', {statePlace: getThePlace}, function(json, textStatus) {
			json.forEach(elemST => {
				if ($.inArray(elemST.lgaName, emptyLGAPPL) === -1) {
					emptyLGAPPL.push(elemST.lgaName)
				}
			});

			var theOBJ = []

			emptyLGAPPL.forEach((item) => {
				theOBJ.push(item)
				theOBJ[item] = {
					name: item,
					count: 0
				}
				theLGAs.forEach((theLGA) => {
					if (getThePlace === theLGA.stName) {
						if (theLGA.lgaName === item) {
							theOBJ[item].count++
							return theOBJ;
						}
					}
				})
			})

			theOBJ.forEach((tellMe) => {
				$('#populate').append(`<div class='column is-one-third' onclick='getTheLGA("`+theOBJ[tellMe].name+`", "`+getThePlace+`")'> <div class='box'> <p class='is-size-6'>Name of Local Govt: <strong> `+theOBJ[tellMe].name+`</strong></p> <p class='is-size-6'>Number of Members <strong>`+theOBJ[tellMe].count+`</strong></p> </div></div>`)
			})

			$.getJSON('https://adp.ng/register/senates', {stateReg: getThePlace}, function(jsonS, textStatus) {

				var senates = jsonS.sen
				var constit = jsonS.fedc

				var Senatorial = [], FedConstituency = [];

					senates.forEach((item) => {
						Senatorial.push(item.senatorial_zone)
						Senatorial[item.senatorial_zone] = {
							name: item.senatorial_zone,
							count: 0
						}
						theLGAs.forEach((senFed) => {
						var DBLGAName = item.composition.split(",")
						DBLGAName.forEach((itemSA) => {
							var loCalGovt = itemSA.trim();
							if (senFed.lgaName === loCalGovt) {
								Senatorial[item.senatorial_zone].count++;
							}
						});
					});
				})
				Senatorial.forEach((tellMe) => {
					$('#senatesSide').append(`<div class='column is-one-third'> <div class='box is-info'> <p class='is-size-6'>Name of Senatorial Zone: <strong> `+Senatorial[tellMe].name+`</strong></p> <p class='is-size-6'>Number of Members <strong>`+Senatorial[tellMe].count+`</strong></p> </div></div>`)
				})


				// constit.forEach((itemFED) => {
            //
				// 	theLGAs.forEach((senFed) => {
				// 	//querying mongodb to get the Federal  Constituency
				// 	if (senFed.lgaName === 'Lagos Island') {
				// 		FedConstituency.push('Lagos Island I/II')
				// 		FedConstituency['Lagos Island I/II'] = {
				// 			name: 'Lagos Island I/II',
				// 			count: 0
				// 		}
				// 		FedConstituency['Lagos Island I/II'].count++
				// 	} else if (senFed.lgaName === 'Mushin') {
				// 		FedConstituency.push('Mushin I/II')
				// 		FedConstituency['Mushin I/II'] = {
				// 			name: 'Mushin I/II',
				// 			count: 0
				// 		}
				// 		FedConstituency['Mushin I/II'].count++
				// 	} else if (senFed.lgaName === 'Oshodi/Isolo') {
				// 	FedConstituency.push('Oshodi/Isolo I/II')
				// 	FedConstituency['Oshodi/Isolo I/II'] = {
				// 		name: 'Oshodi/Isolo I/II',
				// 		count: 0
				// 	}
				// 	FedConstituency['Oshodi/Isolo I/II'].count++
            //
				// 	} else if (senFed.lgaName === 'Surulere') {
				// 		FedConstituency.push('Surulere I/II')
				// 		FedConstituency['Surulere I/II'] = {
				// 			name: 'Surulere I/II',
				// 			count: 0
				// 		}
				// 		FedConstituency['Surulere I/II'].count++
            //
				// 	} else if (senFed.lgaName === 'Port Harcourt') {
				// 		FedConstituency.push('Port Harcourt I/II')
				// 		FedConstituency['Port Harcourt I/II'] = {
				// 			name: 'Port Harcourt I/II',
				// 			count: 0
				// 		}
				// 		FedConstituency['Port Harcourt I/II'].count++
				// 	} else {
				// 		FedConstituency.push(itemFED.fed_const_name)
				// 		FedConstituency[itemFED.fed_const_name] = {
				// 			name: itemFED.fed_const_name,
				// 			count: 0
				// 		}
				// 		var regexstring = new RegExp("\\b"+senFed.lgaName+"\\b","ig") // regular expression to check Federal Constituency
				// 			var FedName = itemFED.fed_const_name;
				// 			if (FedName.match(regexstring) !== null) {
				// 				FedConstituency[itemFED.fed_const_name].count++
				// 			}
				// 		}
				// 	});
            //
				// })


			});
		});
		var theLGAs = ThisMember.come;

	}


	var getTheLGA = (getTheLGA, getThePlace) => {
		$('#breadcrumb a').removeAttr('aria-current')
		$('#senatesSide').addClass('is-hidden')
		var child = document.getElementById('populate').innerHTML = ' '

		$('#breadcrumb').append('<li><a href="#" class="is-active" aria-current="page" onclick="toReload()">'+getTheLGA+'</a></li>')

		var emptyWARDPPL = []
		$.getJSON('https://adp.ng/register/getWARDout', {stateReg: getThePlace, lgaReg: getTheLGA}, function(jsonW, textStatus) {

			var wardsBro = jsonW.docs
			emptyWARDPPL = []


			wardsBro.forEach(elemST => {
				if ($.inArray(elemST.wardName, emptyWARDPPL) === -1) {
					emptyWARDPPL.push(elemST.wardName)
				}
			});


			var theOBJ = []

			emptyWARDPPL.forEach((item) => {
				theOBJ.push(item)
				theOBJ[item] = {
					name: item,
					count: 0
				}
				theLGAs.forEach((theLGA) => {
					if (getThePlace === theLGA.stName) {
						if (theLGA.lgaName === getTheLGA) {
							if (theLGA.wardName === item) {
								theOBJ[item].count++
								return theOBJ;
							}
						}
					}
				})
			})

			theOBJ.forEach((tellMe) => {
				$('#populate').append(`<div class='column is-one-third' onclick='getThePoll("`+theOBJ[tellMe].name+`", "`+getTheLGA+`", "`+getThePlace+`")'> <div class='box'> <p class='is-size-6'>Name of Ward: <strong> `+theOBJ[tellMe].name+`</strong></p> <p class='is-size-6'>Number of Members <strong>`+theOBJ[tellMe].count+`</strong></p> </div></div>`)
			})
		});
		var theLGAs = ThisMember.come;

	}


	var getThePoll = (getThePoll, getTheLGA, getThePlace) => {
		$('#breadcrumb a').removeAttr('aria-current')

		var child = document.getElementById('populate').innerHTML = ' '
		$('#breadcrumb').append('<li><a href="#" aria-current="page" onclick="toReload()">'+getThePoll+'</a></li>')

		var emptyWARDPPL = []
		$.getJSON('https://adp.ng/register/getPolling', {wardName: getThePoll, stateName: getThePlace, localgovtName: getTheLGA}, function(jsonPU, textStatus) {



			var PollingPoll = jsonPU


			var theOBJ = []

			PollingPoll.forEach((item) => {
				theOBJ.push(item.psName)
				theOBJ[item.psName] = {
					name: item.psName,
					count: 0,
					people: []
				}
				theLGAs.forEach((theLGA) => {
					if (getThePlace === theLGA.stName) {
						if (theLGA.lgaName === getTheLGA) {
							if (theLGA.wardName === getThePoll) {
								if (theLGA.pollingUnit === item.psName) {
									theOBJ[item.psName].count++
									theOBJ[item.psName].people.push(theLGA)
									return theOBJ;
								}
							}
						}
					}
				})
			})


			theOBJ.forEach((tellMe) => {
				$('#populate').append(`<div class='column is-one-third' onclick='displayThem("`+theOBJ[tellMe].name+`", "`+getThePoll+`", "`+getTheLGA+`", "`+getThePlace+`")'> <div class='box'> <p class='is-size-6'>Name of Ward: <strong> `+theOBJ[tellMe].name+`</strong></p> <p class='is-size-6'>Number of Members <strong>`+theOBJ[tellMe].count+`</strong></p> </div></div>`)
			})

		});
		var theLGAs = ThisMember.come;

	}

</script> -->
<script type="text/javascript">
document.onreadystatechange = function () {
	if (document.readyState === "complete") {
    $.ajaxSetup({
      headers : {
        authorization: "{{header}}"
      }
    });
	}
}
var getThere = function (arguments) {
	$.getJSON('lga', {param: arguments}, function(json, textStatus) {
		if (json.contact !== null) {
			var theContact = json.contact
			$('#thisAddress').html(theContact.address)
			$('#thisContact').html('<i class="fa fa-phone" style="color: green; font-size: 25px;"></i>&nbsp;&nbsp; <strong style="font-size: 19px;">'+theContact.officeNo+'</strong> &nbsp; &nbsp;<i class="fa fa-envelope" style="color: red; font-size: 25px;"></i>&nbsp;&nbsp; <strong style="font-size: 19px;">'+theContact.officeEmail+'</strong>')
		}
		var places = json.docs
		$('#listWards').html(' ')
		places.forEach((item) => {
			$('#listWards').append('<div class="col-sm-6 mb-4"><div class="card"><div class="card-body"><h5 class="card-title">'+item._id+' Ward</h5><p class="card-text"></p></div></div></div>')
		})
	});
}
</script>
